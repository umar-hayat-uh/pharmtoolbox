<!-- Navbar -->
<nav class="bg-white shadow-md fixed top-0 left-0 w-full z-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <!-- Brand -->
      <div class="flex items-center">
        <span class="text-2xl font-bold text-emerald-600 tracking-tight">Pharmatoolbox</span>
      </div>

      <!-- Desktop Menu -->
      <div class="hidden md:flex space-x-6 items-center">
        <a href="#" class="cursor-pointer text-slate-700 hover:text-emerald-600 transition">Home</a>
        <a href="#" class="cursor-pointer text-slate-700 hover:text-emerald-600 transition">Features</a>
        <a href="#" class="cursor-pointer text-slate-700 hover:text-emerald-600 transition">About</a>
        <a href="#" class="cursor-pointer text-slate-700 hover:text-emerald-600 transition">Contact</a>

        <!-- Tools Dropdown -->
        <div class="relative">
          <button id="tools-btn" class="flex items-center cursor-pointer text-slate-700 hover:text-emerald-600 transition">
            Tools
            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" stroke-width="2"
                 viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
            </svg>
          </button>
          <div id="tools-dropdown" class="absolute hidden bg-white shadow-md rounded-md mt-2 py-2 w-48">
            <a href="<%= tools_dosage_calculator_index_path %>"
               class="block px-4 py-2 cursor-pointer text-slate-700 hover:bg-emerald-50 hover:text-emerald-600">
              ⚖️ Dosage Calculator
            </a>
          </div>
        </div>
      </div>

      <!-- Mobile Menu Button -->
      <div class="md:hidden">
        <button id="menu-btn" class="focus:outline-none cursor-pointer">
          <svg class="w-7 h-7 text-slate-800" fill="none" stroke="currentColor" stroke-width="2"
               viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round"
                  d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>
</nav>

<!-- Mobile Off-Canvas Sidebar -->
<div id="mobile-sidebar"
     class="fixed top-0 right-0 h-full w-64 bg-white/30 backdrop-blur-md shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out z-50">
  <div class="flex justify-between items-center p-4 border-b border-white/30">
    <span class="text-xl font-semibold text-emerald-600">Pharmtoolbox</span>
    <button id="close-btn" class="focus:outline-none cursor-pointer">
      <svg class="w-6 h-6 text-slate-700" fill="none" stroke="currentColor" stroke-width="2"
           viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round"
              d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>
  </div>
  <div class="flex flex-col p-4 space-y-4">
    <%= link_to 'Home', root_path, class:"text-slate-800 font-medium hover:text-emerald-600 transition cursor-pointer" %>
    <a href="#" class="cursor-pointer text-slate-800 font-medium hover:text-emerald-600 transition">Features</a>
    <a href="#" class="cursor-pointer text-slate-800 font-medium hover:text-emerald-600 transition">About</a>
    <a href="#" class="cursor-pointer text-slate-800 font-medium hover:text-emerald-600 transition">Contact</a>

    <!-- Tools Section -->
    <div>
      <span class="text-slate-500 uppercase text-xs font-semibold">Tools</span>
      <%= link_to tools_dosage_calculator_index_path, class: "block mt-2 cursor-pointer text-slate-800 font-medium hover:text-emerald-600 transition" do %>
        <i class="fas fa-balance-scale mr-2"></i>
        Dosage Calculator
      <% end %>
    </div>
  </div>
</div>

<!-- Script -->
<script>
  document.addEventListener("turbo:load", () => {
    const menuBtn = document.getElementById("menu-btn");
    const closeBtn = document.getElementById("close-btn");
    const sidebar = document.getElementById("mobile-sidebar");

    if (menuBtn && closeBtn && sidebar) {
      menuBtn.addEventListener("click", () => {
        sidebar.classList.remove("translate-x-full");
      });

      closeBtn.addEventListener("click", () => {
        sidebar.classList.add("translate-x-full");
      });
    }

    // Tools dropdown
    const toolsBtn = document.getElementById("tools-btn");
    const toolsDropdown = document.getElementById("tools-dropdown");

    if (toolsBtn && toolsDropdown) {
      toolsBtn.addEventListener("click", () => {
        toolsDropdown.classList.toggle("hidden");
      });

      document.addEventListener("click", (e) => {
        if (!toolsBtn.contains(e.target) && !toolsDropdown.contains(e.target)) {
          toolsDropdown.classList.add("hidden");
        }
      });
    }
  });
</script>
